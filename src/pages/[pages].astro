---
import { Image } from "astro:assets";

import BaseLayout from "@layouts/BaseLayout.astro";

import ButtonInternalPage from "@components/buttons/ButtonInternalPage.astro";
import Swiper from "@components/internal-pages/Swiper.astro";
import InfoBlock from "@components/internal-pages/InfoBlock.astro";
import HeroNavigatorContainer from "@components/internal-pages/HeroNavigatorContainer.astro";

import { slugify } from "@data/pagesData"

import { PAGES } from "@data/pagesData";
import HeroInternal from "@components/internal-pages/HeroInternal.astro";
import SectionDivider from "@components/internal-pages/SectionDivider.astro";

export async function getStaticPaths() {
  return PAGES.map((page) => {
    return {
      params: { pages: page.linkHref },
      props: {
        title: page.title,
        heroImage: page.heroImage,
        sections: page.sections,
        sectionsLabels: page.sectionsLabels,
      },
    };
  });
}

const page = Astro.props;

const { title, heroImage, sectionsLabels, sections } = page;
---

<BaseLayout title={page.title} description="">
  <HeroInternal {title} {heroImage} {sectionsLabels}/>
 
    {
      sections.map((content, i) => (
          <InfoBlock
            sectionId={slugify(content.title)}
            textTitle={content.title}
            textContent={content.text}
            images={content.images}
          />

          <>
            {i !== sections.length - 1 && (
             <SectionDivider />
            )}
          </>
      ))
    }
</BaseLayout>

